# Migration `20210125183446-25-01-2021`

This migration has been generated by ruperteb at 1/25/2021, 8:34:46 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Property" ADD COLUMN     "contactId" INTEGER

CREATE TABLE "Landlord" (
"landlordId" SERIAL,
    "landlordName" TEXT,

    PRIMARY KEY ("landlordId")
)

CREATE TABLE "LandlordContact" (
"contactId" SERIAL,
    "name" TEXT,
    "email" TEXT,
    "officeNo" TEXT,
    "mobileNo" TEXT,
    "landlordId" INTEGER NOT NULL,

    PRIMARY KEY ("contactId")
)

CREATE UNIQUE INDEX "Landlord.landlordName_unique" ON "Landlord"("landlordName")

ALTER TABLE "LandlordContact" ADD FOREIGN KEY("landlordId")REFERENCES "Landlord"("landlordId") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Property" ADD FOREIGN KEY("contactId")REFERENCES "LandlordContact"("contactId") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210106080515-1-06-2021_2..20210125183446-25-01-2021
--- datamodel.dml
+++ datamodel.dml
@@ -1,14 +1,14 @@
 // 1
 // datasource db {
 //  provider = "sqlite"
-//  url = "***"
+//  url = "***"
 //}
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 // 2
 generator client {
@@ -36,9 +36,12 @@
   premisesList Premises[]
   images String[]
+  contact LandlordContact? @relation(fields: [contactId], references: [contactId])
+  contactId Int?
+
 }
 model Premises {
   premisesId Int @id @default(autoincrement())
@@ -83,4 +86,23 @@
   email    String @unique
   password String
 }
+
+model Landlord {
+  landlordId       Int    @id @default(autoincrement())
+  landlordName    String? @unique
+  contactsList    LandlordContact[]
+}
+
+model LandlordContact {
+  contactId       Int    @id @default(autoincrement())
+  name     String ?
+  email     String? 
+  officeNo     String ?
+  mobileNo     String ?
+
+  landlordName Landlord @relation(fields: [landlordId], references: [landlordId])
+  landlordId   Int
+  
+  propertyList Property[]
+}
```


